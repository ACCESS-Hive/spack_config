packages:
  # Add a virtual mpi package and set it to not be buildable, to force using available external MPI
  pkgconf:
    externals:
    - spec: pkgconf@1.4.2
      prefix: /usr
  gawk:
    externals:
    - spec: gawk@4.2.1
      prefix: /usr
  binutils:
    externals:
    - spec: binutils@2.30.113
      prefix: /usr
  gmake:
    externals:
    - spec: gmake@4.2.1
      prefix: /usr
  openssl:
    externals:
    - spec: openssl@1.1.1k
      prefix: /usr
    buildable: false
  m4:
    externals:
    - spec: m4@1.4.18
      prefix: /usr
    buildable: false
  autoconf:
    externals:
    - spec: autoconf@2.69
      prefix: /usr
    buildable: false
  libtool:
    externals:
    - spec: libtool@2.4.6
      prefix: /usr
    buildable: false
  openssh:
    externals:
    - spec: openssh@8.0p1
      prefix: /usr
    buildable: false
  diffutils:
    externals:
    - spec: diffutils@3.6
      prefix: /usr
    buildable: false
  git:
    externals:
    - spec: git@2.31.1~tcltk
      prefix: /usr
  findutils:
    externals:
    - spec: findutils@4.6.0
      prefix: /usr
    buildable: false
  cmake:
    externals:
    - spec: cmake@3.20.2
      prefix: /usr
    buildable: false
  groff:
    externals:
    - spec: groff@1.22.3
      prefix: /usr
  bison:
    externals:
    - spec: bison@3.0.4
      prefix: /usr
    buildable: false
  cvs:
    externals:
    - spec: cvs@1.11.23
      prefix: /usr
  texinfo:
    externals:
    - spec: texinfo@6.5
      prefix: /usr
  tar:
    externals:
    - spec: tar@1.30
      prefix: /usr
  subversion:
    externals:
    - spec: subversion@1.10.2
      prefix: /usr
  flex:
    externals:
    - spec: flex@2.6.1+lex
      prefix: /usr
  automake:
    externals:
    - spec: automake@1.16.1
      prefix: /usr
  ninja:
    externals:
    - spec: ninja@1.8.2
      prefix: /usr
  libxml2:
    externals:
    - spec: libxml2@2.9.7
      prefix: /usr
    buildable: false
  python:
    externals:
    - spec: python@3.10.4+bz2+ctypes+dbm+ensurepip+lzma+nis+pyexpat~pythoncmd+readline+sqlite3+ssl+tix+tkinter+uuid+zlib
      prefix: /apps/python3/3.10.4
      modules:
      - python3/3.10.4
      - intel-mkl/2021.4.0
    - spec: python@2.7.18+bz2+ctypes+dbm+ensurepip+nis+pyexpat~pythoncmd+readline+sqlite3+ssl~tix~tkinter+uuid+zlib
      prefix: /usr
    - spec: python@3.6.8+bz2+ctypes+dbm+ensurepip+lzma+nis+pyexpat~pythoncmd+readline+sqlite3+ssl~tix~tkinter+uuid+zlib
      prefix: /usr
    buildable: false
  perl:
    externals:
    - spec: perl@5.26.3~cpanm+shared+threads
      prefix: /usr
    buildable: false
  openmpi:
    externals:
    - spec: openmpi@4.1.2%gcc@8.5.0+cuda+cxx~cxx_exceptions~java+lustre~memchecker+pmi~static~wrapper-rpath
        fabrics=ucx schedulers=tm
      prefix: /apps/openmpi/4.1.2
      modules:
      - openmpi/4.1.2
    - spec: openmpi@4.1.4%gcc@8.5.0+cuda+cxx~cxx_exceptions~java+lustre~memchecker+pmi~static~wrapper-rpath
        fabrics=ucx schedulers=tm
      prefix: /apps/openmpi/4.1.4
      modules:
      - openmpi/4.1.4
  mpi:
    buildable: false
